<div class="container">
  <h2 class="title">Stock Market Average Calculator</h2>

  <div class="row">
    <!-- First Purchase -->
    <div class="column">
      <h3>First Purchase</h3>

      <label>Units</label>
      <input type="number" [(ngModel)]="units1" />

      <label>Price per Share</label>
      <input type="number" [(ngModel)]="price1" />

      <p class="info">
        Amount Invested (1st):
        <b>â‚¹ {{ units1 * price1 | number : '1.2-2' }}</b>
      </p>
    </div>

    <!-- Second Purchase -->
    <div class="column">
      <h3>Second Purchase</h3>

      <label>Units</label>
      <input type="number" [(ngModel)]="units2" />

      <label>Price per Share</label>
      <input type="number" [(ngModel)]="price2" />

      <p class="info">
        Amount Invested (2nd):
        <b>â‚¹ {{ units2 * price2 | number : '1.2-2' }}</b>
      </p>
    </div>
  </div>

  <!-- Results -->
  <div class="results">
    <p>
      Total Units: <b>{{ totalUnits }}</b>
    </p>
    <p>
      Total Amount: <b>â‚¹ {{ totalAmount | number : '1.2-2' }}</b>
    </p>
    <p>
      Average Price per Share:
      <b>{{ avgPrice | number : '1.2-2' }}</b>
    </p>
  </div>

  <!-- Buttons -->
  <div class="buttons">
    <button class="clear" (click)="clear()">Clear Fields</button>
    <button class="calc" (click)="calculateAverage()">Calculate Average</button>
  </div>
</div>

<!-- CMP INPUT -->
<div class="cmp-box">
  <label>Current Market Price (CMP)</label>
  <input type="number" [(ngModel)]="cmp" (input)="calculateLoss()" />
</div>

<!-- LOSS/PROFIT OUTPUT -->
<div class="loss-section" *ngIf="showLoss">
  <!-- FIRST LOSS -->
  <div class="loss-box">
    <h3>ðŸ“‰ Current Loss or Profit (From First Purchase Price)</h3>

    <p>
      Loss Amount or Profit Amount:
      <b [ngStyle]="{ color: firstIsLoss ? 'red' : 'green' }">
        {{ firstIsLoss ? '-â‚¹ ' : '+â‚¹ ' }}
        {{ firstDisplayAmount | number : '1.2-2' }}
      </b>
    </p>

    <p>
      Loss or Profit Percentage:
      <b [ngStyle]="{ color: firstIsLossPct ? 'red' : 'green' }">
        {{ firstIsLossPct ? '-' : '+' }}
        {{ firstDisplayPct | number : '1.2-2' }}%
      </b>
    </p>
  </div>

  <!-- AVERAGE LOSS -->
  <div class="loss-box">
    <h3>ðŸ“‰ Loss After Averaging or Profit (Based on Average Price)</h3>

    <p>
      Loss Amount or Profit Amount:
      <b [ngStyle]="{ color: avgIsLoss ? 'red' : 'green' }">
        {{ avgIsLoss ? '-â‚¹ ' : '+â‚¹ ' }}
        {{ avgDisplayAmount | number : '1.2-2' }}
      </b>
    </p>

    <p>
      Loss Percentage or Profit Percentage:
      <b [ngStyle]="{ color: avgIsLossPct ? 'red' : 'green' }">
        {{ avgIsLossPct ? '-' : '+' }}
        {{ avgDisplayPct | number : '1.2-2' }}%
      </b>
    </p>
  </div>

  <!-- LOSS REDUCED -->
  <div class="loss-box">
    <h3>ðŸ“Š Loss Reduced or Profit Reduced</h3>

    <p>
      Amount Reduced Due to Averaging:
      <b [ngStyle]="{ color: reducedIsLoss ? 'red' : 'green' }">
        {{ reducedIsLoss ? '-â‚¹ ' : '+â‚¹ ' }}
        {{ reducedDisplayAmount | number : '1.2-2' }}
      </b>
    </p>

    <p>
      Percentage Reduced:
      <b [ngStyle]="{ color: reducedIsLossPct ? 'red' : 'green' }">
        {{ reducedIsLossPct ? '-' : '+' }}
        {{ reducedDisplayPct | number : '1.2-2' }}%
      </b>
    </p>
  </div>
</div>
